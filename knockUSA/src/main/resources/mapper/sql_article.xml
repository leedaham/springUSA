<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.sql_article">

	<select id="SELECT_BOARD" resultType="kr.co.knockusa.vo.BoardVo">
		SELECT * FROM `KTUT_BOARD` WHERE `board_cate`=#{cate};
	</select>
	
	<select id="SELECT_ARTICLES" resultType="kr.co.knockusa.vo.ArticleVo">
		SELECT a.*, b.user_name FROM
		`KTUT_ARTICLE` AS a, 
		`KTUT_USER` AS b
		WHERE a.article_id = b.user_id
		AND a.article_cate=#{cate}
		AND a.article_parent =0;
	</select>

	<select id="SELECT_ARTICLE" resultType="kr.co.knockusa.vo.ArticleVo">
		SELECT a.*, b.user_name FROM
		`KTUT_ARTICLE` AS a, 
		`KTUT_USER` AS b
		WHERE a.article_id = b.user_id
		AND a.article_no =#{article_no}; 
	</select>

	<insert id="INSERT_ARTICLE">
		INSERT INTO `KTUT_ARTICLE` SET 
		`article_cate`=#{article_cate},
		`article_title`=#{article_title},
		`article_content`=#{article_content},
		`article_id`=#{article_id},
		`article_regip`=#{article_regip},
		`article_rdate`=NOW();
	</insert>
	
	<delete id="DELETE_ARTICLE">
		DELETE FROM `KTUT_ARTICLE` WHERE `article_no`=#{article_no};
	</delete>

	<update id="UPDATE_ARTICLE_HIT">
		UPDATE `KTUT_ARTICLE` SET `article_hit` = `article_hit`+1 WHERE article_no =#{article_no};
	</update>

	<select id="SELECT_REVIEW_BEST" resultType="kr.co.knockusa.vo.ArticleVo">
		SELECT * FROM `KTUT_ARTICLE` WHERE `article_cate`='review' AND `article_parent`= 0 ORDER BY `article_hit` DESC LIMIT 1;		
	</select>
	
</mapper>